#### 一、SSIM（结构性相似度）
[论文链接](https://ece.uwaterloo.ca/~z70wang/publications/ssim.pdf)
##### 1. 基本原理
>一、结构相似性
>自然图像具有极高的结构性，表现在图像的像素间存在着很强的相关性，尤其是在空间相似的情况下。这些相关性在视觉场景中携带着关于物体结构的重要信息。我们假设人类视觉系统（HSV）主要从可视区域内获取结构信息。所以通过探测结构信息是否改变来感知图像失真的近似信息。
    大多数的基于误差敏感度（error sensitivity）的质量评估方法(如MSE,PSNR)使用线性变换来分解图像信号，这不会涉及到相关性。我们要讨论的SSIM就是要找到更加直接的方法来比较失真图像和参考图像的结构。

> SSIM指数
> 物体表面的亮度信息与照度和反射系数有关，且场景中的物体的结构与照度是独立的，反射系数与物体有关。我们可以通过分离照度对物体的影响来探索一张图像中的结构信息。这里，把与物体结构相关的亮度和对比度作为图像中结构信息的定义。因为一个场景中的亮度和对比度总是在变化的，所以我们可以通过分别对局部的处理来得到更精确的结果。
##### 2. 相关概念
* 用于检测两张尺寸相同的图像的相似度；
* `𝑆𝑆𝐼𝑀  `公式基于样本 𝑥 和 𝑦 之间的三个比较衡量：亮度 (luminance)、对比度 (contrast) 和结构 (structure)。
![在这里插入图片描述](https://img-blog.csdnimg.cn/20200928145411230.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1BldGVyVmVn,size_16,color_FFFFFF,t_70#pic_center)

1. 𝜇𝑥 为 𝑥 的均值
2. 𝜇𝑦 为 𝑦 的均值
3. 𝜎2𝑥 为 𝑥 的方差
4. 𝜎2𝑦 为 𝑦 的方差
5. 𝜎𝑥𝑦 为 𝑥 和 𝑦 的协方差
6. 𝑐1=(𝑘1𝐿)2,𝑐2=(𝑘2𝐿)2 为两个常数，避免除零
7. 𝐿 为像素值的范围，2𝐵−1
8. 𝑘1=0.01,𝑘2=0.03 为默认值
* SSIM的一般方程
![在这里插入图片描述](https://img-blog.csdnimg.cn/20200928145530197.png#pic_center)
* 一般 𝛼，𝛽，𝛾 取 1，并且令 𝐶3=𝐶2/2，得到简化的 SSIM 公式：
![在这里插入图片描述](https://img-blog.csdnimg.cn/20200928145606417.png#pic_center)


##### 2. 实现过程
* 每次计算的时候都从图片上取一个N*N的窗口，然后不断滑动窗口进行计算，最后取平均值作为全局的SSIM
##### 3. 总结
* 适用于图像质量衡量，超分辨率、图像去模糊

#### 二、cosin相似度（余弦相似度）
##### 1. 基本原理
略
##### 2. 相关概念
略
##### 3. 实现过程
略
##### 4. 总结
* 不适合处理图像的相似度问题
#### 三、基于直方图
##### 1. 基本原理
* 对两幅图之间内容的相似程度进行求值，根据相似度值的大小，设置阈值，将图片归为一类或不同类
##### 2. 相关概念
* 【直方图数据采集】：计算图像的直方图
* 【巴士系数算法】：求得源图像和目标图像之间的相似度
* 【图像相似度值】：根据相似度对图像作筛选
##### 3. 实现过程
* 【直方图数据采集】
>1.  直方图分为灰度直方图与RGB直方图;
> 2. 对于灰度图像直方图计算十分简单，只要初始化一个大小为256的直方图数组H，然后根据像素值完成频率分布统计，假设像素值为124，则H[124] += 1,;
> 3. 对于彩色RGB像素来说直方图表达有两种方式，一种是单一直方图，另外一
种是三维直方图;
>4. 三维直方图比较简单明了，分别对应RGB三种颜色，定义三个直方图HR,
HG, HB, 假设某一个像素点P的RGB值为(4, 231,129), 则对于的直方图计算为HR[4] += 1,
HG[231] += 1, HB[129] += 1, 如此对每个像素点完成统计以后，RGB彩色直方图数据就生成了。
>5. RGB像素的单一直方图SH表示稍微复杂点，每个颜色的值范围为0 ~ 255之间的，假设
可以分为一定范围等份，当8等份时，每个等份的值范围为32， 16等份时，每个等份值范
围为16，当4等份时候，每个等份值的范围为64，假设RGB值为(14, 68, 221), 16等份之
后，它对应直方图索引值(index)分别为: (0, 4, 13), 根据计算索引值公式:index = R + G*16 + B*16*16
>6. 如此遍历所有RGB像素值，完成直方图数据计算。
* 【通过巴士系数计算】
![在这里插入图片描述](https://img-blog.csdnimg.cn/20200928143540865.png#pic_center)
1. P, P’分别代表源与候选的图像直方图数据;
2. 对每个相同i的数据点乘积开平方以后相加得出的结果即为图像相似度值（巴氏系数因子值），范围为0到1之间;
##### 4. 总结
* 由于直方图自身的局限性：仅反映图像像素各灰度值的数量，不能反映图像纹理结构：
* 该方法存在较多误判，比如纹理结构相同，但明暗不同的图像，应该相似度很高，但实际结果是相似度很低，而纹理结构不同，但明暗相近的图像，相似度却很高。
##### 5. python实例
#### 四、基于图像指纹
##### 1. 基本原理
* `图像指纹`和人的指纹一样，可以视为身份的象征
* 将图像按照一定的`哈希算法`，经过运算后得出一组二进制数字，即为`”图像指纹“`
![在这里插入图片描述](https://img-blog.csdnimg.cn/20200928101959358.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1BldGVyVmVn,size_16,color_FFFFFF,t_70#pic_center)

##### 2. 相关概念
> 汉明距离：等长的字符串对应位置的不同字符的个数
* 【汉明距离（`理解`）】：将一个字符串变换成另一个字符串需要替换的字符个数
* 【汉明距离（`使用`）】：使用汉明距离来衡量两张图片的差异，汉明距离越小，相似度越高，韩迷距离为0，即代表两张图片完全一样
> 哈希算法：用来构建散列函数，计算"图像散列"的算法
* 【平均哈希算法（`aHash`）】：
* 【感知哈希算法（`dhash`）】：
* 【差异值哈希算法（`phash`）】：
##### 3. 实现过程：
![在这里插入图片描述](https://img-blog.csdnimg.cn/20200928102637515.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1BldGVyVmVn,size_16,color_FFFFFF,t_70#pic_center)

* 缩小尺寸。将图片缩小到 8x8 的尺寸，总共 64 个像素。这一步的作用是去除图片的细节，只保留结构、明暗等基本信息，摒弃不同尺寸、比例带来的图片差异。 
* 简化色彩。将缩小后的图片，转为 64 级灰度。也就是说，所有像素点总共只有 64 种颜色。 计算平均值。计算所有 64 个像素的灰度平均值。 
* 比较像素的灰度。将每个像素的灰度，与平均值进行比较。大于或等于平均值，记为 1 ；小于平均值，记为 0。 
* 计算哈希值。将上一步的比较结果，组合在一起，就构成了一个 64 位的整数，这就是这张图片的指纹。
* 组合的次序并不重要，只要保证所有图片都采用同样次序就行了。 

##### 4. 总结
* 基于`图像指纹`在寻找一模一样的图片是十分有效的，但不适合「相似图片」的搜索；
*  基于`图像指纹`无法实现对局部特征的提取和搜索；

